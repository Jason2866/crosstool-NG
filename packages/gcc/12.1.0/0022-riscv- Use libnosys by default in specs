From 314fb30a9def5d37ecf6a1cb3741f18ecfaf21f5 Mon Sep 17 00:00:00 2001
From: Anton Maklakov <anton@espressif.com>
Date: Wed, 8 Sep 2021 13:56:02 +0700
Subject: [PATCH] riscv: Use libnosys by default in specs

---
 gcc/config/riscv/elf.h | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/gcc/config/riscv/elf.h b/gcc/config/riscv/elf.h
index 7e65e4990311..9dc4d73b3611 100644
--- a/gcc/config/riscv/elf.h
+++ b/gcc/config/riscv/elf.h
@@ -25,12 +25,14 @@ along with GCC; see the file COPYING3.  If not see
 %{shared}"
 
 /* Link against Newlib libraries, because the ELF backend assumes Newlib.
-   Handle the circular dependence between libc and libgloss. */
+   Handle the circular dependence between libc and nosys. */
 #undef  LIB_SPEC
-#define LIB_SPEC "--start-group -lc %{!specs=nosys.specs:-lgloss} --end-group"
+#define LIB_SPEC "-lc -lnosys -lc"
 
+/* crti.S is empty */
 #undef  STARTFILE_SPEC
 #define STARTFILE_SPEC "crt0%O%s crtbegin%O%s"
 
+/* crtn.S is empty */
 #undef  ENDFILE_SPEC
 #define ENDFILE_SPEC "crtend%O%s"